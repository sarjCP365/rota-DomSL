SHIFT PATTERN TABLES FOR DATAVERSE IMPORT
===========================================

TABLE 1: SHIFT PATTERN TEMPLATE
Table Schema Name: cp365_shiftpatterntemplate
Table Display Name: Shift Pattern Template
Table Description: Reusable shift pattern templates defining rotation schedules for staff

Column Display Name,Column Schema Name,Data Type,Required,Default,Min,Max,Choice Options,Notes
Pattern Name,cp365_name,Single line text,Yes,,,,,"PRIMARY COLUMN - auto-created"
Description,cp365_sp_description,Multiple lines text,No,,,,,
Rotation Cycle (Weeks),cp365_sp_rotationcycleweeks,Whole number,Yes,1,1,8,,
Average Weekly Hours,cp365_sp_averageweeklyhours,Decimal (2),No,,,,,
Total Rotation Hours,cp365_sp_totalrotationhours,Decimal (2),No,,,,,
Is Standard Template,cp365_sp_isstandardtemplate,Yes/No,Yes,No,,,,
Default Publish Status,cp365_sp_defaultpublishstatus,Choice,Yes,Unpublished,,,"Published=1001, Unpublished=1009",
Generation Window (Weeks),cp365_sp_generationwindowweeks,Choice,Yes,2 Weeks,,,"1 Week=1, 2 Weeks=2, 4 Weeks=4",
Pattern Status,cp365_sp_patternstatus,Choice,Yes,Active,,,"Active=1, Inactive=2, Archived=3",

---

TABLE 2: SHIFT PATTERN DAY
Table Schema Name: cp365_shiftpatternday
Table Display Name: Shift Pattern Day
Table Description: Individual day definitions within a shift pattern rotation

Column Display Name,Column Schema Name,Data Type,Required,Default,Min,Max,Choice Options,Related Table,Delete Behaviour
Day Name,cp365_name,Single line text,Yes,,,,,,"PRIMARY COLUMN"
Week Number,cp365_sp_weeknumber,Whole number,Yes,,1,8,,,
Day of Week,cp365_sp_dayofweek,Choice,Yes,,,,"Mon=1,Tue=2,Wed=3,Thu=4,Fri=5,Sat=6,Sun=7",,
Start Time,cp365_sp_starttime,Time only,No,,,,,,
End Time,cp365_sp_endtime,Time only,No,,,,,,
Break Duration (Minutes),cp365_sp_breakminutes,Whole number,No,0,0,480,,,
Is Rest Day,cp365_sp_isrestday,Yes/No,Yes,No,,,,
Is Overnight Shift,cp365_sp_isovernight,Yes/No,Yes,No,,,,
Display Order,cp365_sp_displayorder,Whole number,No,,,,,,
Pattern Template,cp365_shiftpatterntemplate,Lookup,Yes,,,,cp365_shiftpatterntemplate,Cascade
Shift Reference,cp365_shiftreference,Lookup,No,,,,cp365_shiftreference,Remove Link
Shift Activity,cp365_shiftactivity,Lookup,No,,,,cp365_shiftactivity,Remove Link

---

TABLE 3: STAFF PATTERN ASSIGNMENT
Table Schema Name: cp365_staffpatternassignment
Table Display Name: Staff Pattern Assignment
Table Description: Links staff members to shift pattern templates with effective dates

Column Display Name,Column Schema Name,Data Type,Required,Default,Min,Max,Choice Options,Related Table,Delete Behaviour
Assignment Name,cp365_name,Single line text,Yes,,,,,,"PRIMARY COLUMN"
Start Date,cp365_sp_startdate,Date only,Yes,,,,,,
End Date,cp365_sp_enddate,Date only,No,,,,,,
Rotation Start Week,cp365_sp_rotationstartweek,Whole number,Yes,1,1,8,,,
Priority,cp365_sp_priority,Whole number,Yes,1,1,99,,,"1=highest"
Applies to Days,cp365_sp_appliestodays,Multiple lines text,No,,,,,,"JSON array"
Override Publish Status,cp365_sp_overridepublishstatus,Yes/No,No,No,,,,
Publish Status,cp365_sp_publishstatus,Choice,No,,,,"Published=1001, Unpublished=1009",,
Last Generated Date,cp365_sp_lastgenerateddate,Date only,No,,,,,,
Assignment Status,cp365_sp_assignmentstatus,Choice,Yes,Active,,,"Active=1, Ended=2, Superseded=3",,
Staff Member,cp365_staffmember,Lookup,Yes,,,,cp365_staffmember,Restrict
Pattern Template,cp365_shiftpatterntemplate,Lookup,Yes,,,,cp365_shiftpatterntemplate,Restrict

---

TABLE 4: SHIFT GENERATION LOG
Table Schema Name: cp365_shiftgenerationlog
Table Display Name: Shift Generation Log
Table Description: Audit trail for pattern-based shift generation operations

Column Display Name,Column Schema Name,Data Type,Required,Default,Min,Max,Choice Options,Related Table,Delete Behaviour
Log Name,cp365_name,Single line text,Yes,,,,,,"PRIMARY COLUMN"
Generation Date,cp365_sp_generationdate,Date and time,Yes,,,,,,
Period Start,cp365_sp_periodstart,Date only,Yes,,,,,,
Period End,cp365_sp_periodend,Date only,Yes,,,,,,
Shifts Generated,cp365_sp_shiftsgenerated,Whole number,Yes,0,,,,,
Conflicts Detected,cp365_sp_conflictsdetected,Whole number,Yes,0,,,,,
Conflict Details,cp365_sp_conflictdetails,Multiple lines text,No,,,,,,"JSON"
Generation Type,cp365_sp_generationtype,Choice,Yes,,,,"Manual=1, Scheduled=2, On Demand=3",,
Pattern Assignment,cp365_staffpatternassignment,Lookup,Yes,,,,cp365_staffpatternassignment,Cascade
Generated By,cp365_sp_generatedby,Lookup,No,,,,User (systemuser),Remove Link

---

MODIFY EXISTING TABLE: CP365_SHIFT
Add these columns to the existing Shifts table

Column Display Name,Column Schema Name,Data Type,Required,Default,Related Table,Delete Behaviour
Is Generated from Pattern,cp365_sp_isgeneratedfrompattern,Yes/No,No,No,,
Pattern Week,cp365_sp_patternweek,Whole number,No,,,
Pattern Day of Week,cp365_sp_patterndayofweek,Whole number,No,,,
Staff Pattern Assignment,cp365_staffpatternassignment,Lookup,No,,cp365_staffpatternassignment,Remove Link

---

CREATION ORDER (IMPORTANT!)
1. cp365_shiftpatterntemplate (no dependencies)
2. cp365_shiftpatternday (depends on #1)
3. cp365_staffpatternassignment (depends on #1)
4. cp365_shiftgenerationlog (depends on #3)
5. Modify cp365_shift (depends on #3)

RELATIONSHIP SUMMARY
====================
cp365_shiftpatternday -> cp365_shiftpatterntemplate (Cascade)
cp365_shiftpatternday -> cp365_shiftreference (Remove Link)
cp365_shiftpatternday -> cp365_shiftactivity (Remove Link)
cp365_staffpatternassignment -> cp365_staffmember (Restrict)
cp365_staffpatternassignment -> cp365_shiftpatterntemplate (Restrict)
cp365_shiftgenerationlog -> cp365_staffpatternassignment (Cascade)
cp365_shiftgenerationlog -> User (Remove Link)
cp365_shift -> cp365_staffpatternassignment (Remove Link)

